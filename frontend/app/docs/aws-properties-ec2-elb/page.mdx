# AWS::ElasticLoadBalancing::로드 밸런서

Classic Load Balancer를 지정합니다.

or 속성을 `AvailabilityZones`지정할 수 `Subnets` 있지만 둘 다 지정할 수는 없습니다.

이 리소스에 퍼블릭 IP 주소가 있고 동일한 템플릿에 정의된 VPC에도 있는 경우 DependsOn 속성을 사용하여 VPC-게이트웨이 연결에 대한 종속성을 선언해야 합니다.

## 통사론

AWS CloudFormation 템플릿에서 이 엔터티를 선언하려면 다음 구문을 사용합니다.

### JSON (영문)

```
{
  "Type" : "AWS::ElasticLoadBalancing::LoadBalancer",
  "Properties" : {
      "AccessLoggingPolicy" : AccessLoggingPolicy,
      "AppCookieStickinessPolicy" : [ AppCookieStickinessPolicy, ... ],
      "AvailabilityZones" : [ String, ... ],
      "ConnectionDrainingPolicy" : ConnectionDrainingPolicy,
      "ConnectionSettings" : ConnectionSettings,
      "CrossZone" : Boolean,
      "HealthCheck" : HealthCheck,
      "Instances" : [ String, ... ],
      "LBCookieStickinessPolicy" : [ LBCookieStickinessPolicy, ... ],
      "Listeners" : [ Listeners, ... ],
      "LoadBalancerName" : String,
      "Policies" : [ Policies, ... ],
      "Scheme" : String,
      "SecurityGroups" : [ String, ... ],
      "Subnets" : [ String, ... ],
      "Tags" : [Tag, ... ]
    }
}
```

## 속성

`AccessLoggingPolicy`  
부하 분산 장치에 대한 액세스 로그가 저장되는 위치와 방법에 대한 정보입니다.  
*필수 항목 *여부: 아니요  
_형식_: AccessLoggingPolicy  
_업데이트 필요 사항_: 중단 없음

`AppCookieStickinessPolicy`  
애플리케이션 제어 세션 고정에 대한 정책에 대한 정보입니다.  
*필수 항목 *여부: 아니요  
_유형_: AppCookieStickinessPolicy 목록  
_업데이트 필요 사항_: 중단 없음

`AvailabilityZones`  
부하 분산 장치의 가용 영역입니다. VPC의 로드 밸런서의 경우 `Subnets` 대신 지정합니다.  
이전에 가용 영역을 지정하지 않았거나 모든 가용 영역을 제거하는 경우 업데이트를 교체해야 합니다. 그렇지 않으면 업데이트를 중단할 필요가 없습니다.  
*필수 항목 *여부: 아니요  
_유형_: 문자열 목록  
_업데이트 필요 사항_: 일부 중단

`ConnectionDrainingPolicy`  
활성화된 경우, 로드 밸런서는 로드 밸런서가 등록 취소되거나 비정상 인스턴스에서 트래픽을 이동하기 전에 기존 요청을 완료할 수 있도록 허용합니다.  
자세한 내용은 Classic Load Balancer 안내서의 연결 드레이닝 구성을 참조하십시오\**.  
*필수 항목 *여부: 아니요  
*유형*: ConnectionDrainingPolicy  
*업데이트 필요 사항\*: 중단 없음

`ConnectionSettings`  
사용하도록 설정하면 로드 밸런서가 지정된 기간 동안 연결을 유휴 상태로 유지할 수 있습니다(연결을 통해 데이터가 전송되지 않음).  
기본적으로 Elastic Load Balancing은 로드 밸런서의 프런트엔드 및 백엔드 연결 모두에 대해 60초의 유휴 연결 제한 시간을 유지합니다. 자세한 내용은 Classic Load Balancer 안내서의 유휴 연결 제한 시간 구성을 참조하십시오\**.  
*필수 항목 *여부: 아니요  
*형식*: ConnectionSettings  
*업데이트 필요 사항\*: 중단 없음

`CrossZone`  
활성화된 경우 로드 밸런서는 가용 영역에 관계없이 모든 인스턴스에서 요청 트래픽을 균등하게 라우팅합니다.  
자세한 내용은 Classic Load Balancer 안내서의 교차 영역 로드 밸런싱 구성을 참조하십시오\**.  
*필수 항목 *여부: 아니요  
*유형*: Boolean  
*업데이트 필요 사항\*: 중단 없음

`HealthCheck`  
EC2 인스턴스의 상태를 평가할 때 사용할 상태 확인 설정입니다.  
이전에 상태 확인 설정을 지정하지 않았거나 상태 확인 설정을 제거하는 경우 업데이트를 교체해야 합니다. 그렇지 않으면 업데이트를 중단할 필요가 없습니다.  
*필수 항목 *여부: 아니요  
_유형_: HealthCheck  
_업데이트 필요 사항_: 일부 중단

`Instances`  
로드 밸런서에 대한 인스턴스의 ID입니다.  
*필수 항목 *여부: 아니요  
_유형_: 문자열 목록  
_업데이트 필요 사항_: 중단 없음

`LBCookieStickinessPolicy`  
기간 기반 세션 고정에 대한 정책에 대한 정보입니다.  
*필수 항목 *여부: 아니요  
_유형_: LBCookieStickinessPolicy 목록  
_업데이트 필요 사항_: 중단 없음

`Listeners`  
부하 분산 장치에 대한 수신기입니다. 포트당 최대 하나의 수신기를 지정할 수 있습니다.  
리스너의 속성을 업데이트하면 AWS CloudFormation에서 기존 리스너를 삭제하고 지정된 속성으로 새 리스너를 생성합니다. 새 수신기를 만드는 동안 클라이언트는 부하 분산 장치에 연결할 수 없습니다.  
_필수 항목 여부_: 예  
_유형_: 리스너 목록  
_업데이트 필요 사항_: 중단 없음

`LoadBalancerName`  
부하 분산 장치의 이름입니다. 이 이름은 해당 지역의 부하 분산 장치 집합 내에서 고유해야 합니다.  
이름을 지정하지 않으면 AWS CloudFormation에서 로드 밸런서에 대한 고유한 물리적 ID를 생성합니다. 자세한 내용은 이름 유형을 참조하십시오. 이름을 지정하면 이 리소스를 대체해야 하는 업데이트를 수행할 수 없지만 다른 업데이트는 수행할 수 있습니다. 리소스를 바꾸려면 새 이름을 지정합니다.  
*필수 항목 *여부: 아니요  
_유형_: 문자열  
_업데이트 필요 사항_: 바꿔 놓음

`Policies`  
Classic Load Balancer에 대해 정의된 정책입니다. 백 엔드 서버 정책만 지정합니다.  
*필수 항목 *여부: 아니요  
_유형_: 정책 목록  
_업데이트 필요 사항_: 중단 없음

`Scheme`  
부하 분산 장치의 유형입니다. VPC의 로드 밸런서에만 유효합니다.  
`Scheme` 인 `internet-facing` 경우 로드 밸런서에는 공용 IP 주소로 확인되는 공용 DNS 이름이 있습니다.  
`Scheme` 인 `internal` 경우 로드 밸런서에는 개인 IP 주소로 확인되는 퍼블릭 DNS 이름이 있습니다.  
*필수 항목 *여부: 아니요  
_유형_: 문자열  
_업데이트 필요 사항_: 바꿔 놓음

`SecurityGroups`  
로드 밸런서의 보안 그룹입니다. VPC의 로드 밸런서에만 유효합니다.  
*필수 항목 *여부: 아니요  
_유형_: 문자열 목록  
_업데이트 필요 사항_: 중단 없음

`Subnets`  
로드 밸런서에 대한 서브넷의 ID입니다. 가용 영역당 최대 하나의 서브넷을 지정할 수 있습니다.  
이전에 서브넷을 지정하지 않았거나 모든 서브넷을 제거하는 경우 업데이트를 교체해야 합니다. 그렇지 않으면 업데이트를 중단할 필요가 없습니다. 현재 가용 영역의 다른 서브넷으로 업데이트하려면 먼저 다른 가용 영역의 서브넷으로 업데이트한 다음 원래 가용 영역의 새 서브넷으로 업데이트해야 합니다.  
*필수 항목 *여부: 아니요  
_유형_: 문자열 목록  
_업데이트 필요 사항_: 일부 중단

`Tags`  
부하 분산 장치와 연결된 태그입니다.  
*필수 항목 *여부: 아니요  
_유형_: 태그 목록  
_업데이트 필요 사항_: 중단 없음

## 반환 값

### 참고문헌

이 리소스의 논리적 ID를 내장 함수에 전달하면 `Ref` `Ref`로드 밸런서의 이름을 반환합니다.

함수 사용에 대한 자세한 `Ref`내용은 Ref를 참조하세요.

### Fn::GetAtt

`Fn::GetAtt`내장 함수는 이 형식의 지정된 특성에 대한 값을 반환합니다. 다음은 사용 가능한 특성 및 샘플 반환 값입니다.

내장 함수 사용에 대한 자세한 `Fn::GetAtt`내용은 Fn::GetAtt 단원을 참조하십시오.

####

`CanonicalHostedZoneName`  
로드 밸런서와 연결된 Route 53 호스팅 영역의 이름입니다. 내부 연결 부하 분산 장치는 이 값을 사용하지 않고 대신 사용합니다 `DNSName` .

`CanonicalHostedZoneNameID` 로드 밸런서와 연결된 Route 53 호스팅 영역 이름의 ID입니다.

`DNSName` 로드 밸런서의 DNS 이름입니다.

`SourceSecurityGroup.GroupName` 로드 밸런서의 백엔드 인스턴스에 대한 인바운드 규칙의 일부로 사용할 수 있는 보안 그룹의 이름입니다.

`SourceSecurityGroup.OwnerAlias` 원본 보안 그룹의 소유자입니다.

## 예제

###

다음 예제에서는 보안 리스너가 있는 Classic Load Balancer를 지정합니다.

#### JSON (영문)

```
"MyLoadBalancer" : {
    "Type": "AWS::ElasticLoadBalancing::LoadBalancer",
    "Properties": {
        "AvailabilityZones": [ "us-east-2a" ],
        "CrossZone": "true",
        "Listeners": [{
            "InstancePort": "80",
            "InstanceProtocol": "HTTP",
            "LoadBalancerPort": "443",
            "Protocol": "HTTPS",
            "PolicyNames": [ "My-SSLNegotiation-Policy" ],
            "SSLCertificateId": "arn:aws:iam::123456789012:server-certificate/my-server-certificate"
        }],
        "HealthCheck": {
            "Target": "HTTP:80/",
            "HealthyThreshold": "2",
            "UnhealthyThreshold": "3",
            "Interval": "10",
            "Timeout": "5"
        },
        "Policies": [{
            "PolicyName": "My-SSLNegotiation-Policy",
            "PolicyType": "SSLNegotiationPolicyType",
            "Attributes": [{
                "Name": "Reference-Security-Policy",
                "Value": "ELBSecurityPolicy-TLS-1-2-2017-01"
            }]
        }]
    }
}
```

## 참고 항목

- Elastic Load Balancing 템플릿 코드 조각
- Elastic Load Balancing API 참조(버전 2012-06-01)\* \*의 CreateLoadBalancer
- Elastic Load Balancing API 참조(버전 2012-06-01)\* \*의 ModifyLoadBalancerAttributes
- Elastic Load Balancing API 참조(버전 2012-06-01)\* \*의 ConfigureHealthCheck
- Classic Load Balancer 사용 설명서
