# AWS::ApiGateway::메서드

이 리소스는 `AWS::ApiGateway::Method` 클라이언트가 요청에서 전송해야 하는 파라미터와 본문을 정의하는 API Gateway 메서드를 생성합니다.

## 통사론

AWS CloudFormation 템플릿에서 이 엔터티를 선언하려면 다음 구문을 사용합니다.

### JSON (영문)

```
{
  "Type" : "AWS::ApiGateway::Method",
  "Properties" : {
      "ApiKeyRequired" : Boolean,
      "AuthorizationScopes" : [ String, ... ],
      "AuthorizationType" : String,
      "AuthorizerId" : String,
      "HttpMethod" : String,
      "Integration" : Integration,
      "MethodResponses" : [ MethodResponse, ... ],
      "OperationName" : String,
      "RequestModels" : {Key: Value, ...},
      "RequestParameters" : {Key: Value, ...},
      "RequestValidatorId" : String,
      "ResourceId" : String,
      "RestApiId" : String
    }
}
```

## 속성

`ApiKeyRequired`  
이 메서드를 호출하는 데 유효한 ApiKey가 필요한지 여부를 지정하는 부울 플래그입니다.  
*필수 항목 *여부: 아니요  
_유형_: Boolean  
_업데이트 필요 사항_: 중단 없음

`AuthorizationScopes`  
메서드에 구성된 권한 부여 범위 목록입니다. 범위는 `COGNITO_USER_POOLS` 권한 부여자와 함께 메서드 호출을 승인하는 데 사용됩니다. 권한 부여는 들어오는 요청의 액세스 토큰에서 구문 분석된 범위와 메서드 범위를 일치시키는 방식으로 작동합니다. 메서드 호출은 메서드 범위가 액세스 토큰의 요청된 범위와 일치하는 경우 권한이 부여됩니다. 그렇지 않으면 호출에 권한이 부여되지 않습니다. 메서드 범위가 구성되면 클라이언트는 권한 부여를 위해 ID 토큰 대신 액세스 토큰을 제공해야 합니다.  
*필수 항목 *여부: 아니요  
_유형_: 문자열 목록  
_업데이트 필요 사항_: 중단 없음

`AuthorizationType`  
메서드의 권한 부여 유형입니다. 이 매개 변수는 필수입니다. 유효한 값은 *API Gateway API Reference*의 Method를 참조하십시오.  
특성을 지정하는 경우 `AuthorizerId` 이 특성에 대해 OR `CUSTOM` 을 지정하십시오 `COGNITO_USER_POOLS` .
*필수 항목 *여부: 아니요  
_유형_: 문자열  
_업데이트 필요 사항_: 중단 없음

`AuthorizerId`  
이 메서드에 사용할 권한 부여자의 식별자입니다. 메서드의 권한 부여 유형은 `CUSTOM` 또는 `COGNITO_USER_POOLS`이어야 합니다.  
*필수 항목 *여부: 아니요  
_유형_: 문자열  
_업데이트 필요 사항_: 중단 없음

`HttpMethod`  
메서드의 HTTP 동사입니다.  
_필수 항목 여부_: 예  
_유형_: 문자열  
_업데이트 필요 사항_: 중단 없음

`Integration`  
`HTTP`, `HTTP_PROXY`, `AWS`, `AWS_PROXY`또는 Mock 통합을 나타냅니다.  
*필수 항목 *여부: 아니요  
_유형_: 통합  
_업데이트 필요 사항_: 중단 없음

`MethodResponses`  
지정된 HTTP 상태 코드와 연결된 메서드 응답을 가져옵니다.  
*필수 항목 *여부: 아니요  
_형식_: MethodResponse 목록  
_업데이트 필요 사항_: 중단 없음

`OperationName`  
메서드에 대한 사용자에게 친숙한 작업 식별자입니다. 예를 들어, 예제 `operationName` 의 메서드 `ListPets` 에 of `GET /pets` 를 할당할 수 있습니다 `PetStore` .  
*필수 항목 *여부: 아니요  
_유형_: 문자열  
_업데이트 필요 사항_: 중단 없음

`RequestModels`  
Model 리소스로 표시되는 데이터 스키마(매핑된 값)를 지정하는 키-값 맵으로, 지정된 콘텐츠 형식의 요청 페이로드(매핑 키)입니다.  
*필수 항목 *여부: 아니요  
_유형_: 문자열 맵  
_업데이트 필요 사항_: 중단 없음

`RequestParameters`  
API Gateway에서 수락할 수 있는 필수 또는 선택적 메서드 요청 파라미터를 정의하는 키-값 맵입니다. 키는 `method.request.{location}.{name}`, , , 또는 `location` 의 `querystring` `path` 패턴과 일치하는 메서드 요청 파라미터 이름이며, `header` `name` 는 유효하고 고유한 파라미터 이름입니다. 키와 연결된 값은 매개 변수가 필수(`true`) 또는 선택 사항()`false`인지를 나타내는 부울 플래그입니다. 여기에 정의된 메서드 요청 파라미터 이름은 통합에서 사용할 수 있으며, 통합 요청 파라미터 또는 템플릿에 매핑할 수 있습니다.  
*필수 항목 *여부: 아니요  
_유형_: 부울 맵  
_업데이트 필요 사항_: 중단 없음

`RequestValidatorId`  
요청 유효성 검사를 위한 RequestValidator의 식별자입니다.  
*필수 항목 *여부: 아니요  
_유형_: 문자열  
_업데이트 필요 사항_: 중단 없음

`ResourceId`  
MethodResponse 리소스의 리소스 식별자입니다.  
_필수 항목 여부_: 예  
_유형_: 문자열  
_업데이트 필요 사항_: 중단 없음

`RestApiId`  
연결된 RestApi의 문자열 식별자입니다.  
_필수 항목 여부_: 예  
_유형_: 문자열  
_업데이트 필요 사항_: 중단 없음

## 반환 값

### 참고문헌

이 리소스의 논리적 ID를 내장 함수에 전달하면 `Ref`메서드 `Ref`ID(예: )가 반환 됩니다`mysta-metho-01234b567890example`.

함수 사용에 대한 자세한 `Ref`내용은 Ref를 참조하세요.

## 예제

### 모의 객체 메서드(Mock Method)

다음 예제에서는 API에 대한 모의 GET 메서드를 만듭니다 `MyApi` .

#### JSON (영문)

```
{
    "MockMethod": {
        "Type": "AWS::ApiGateway::Method",
        "Properties": {
            "RestApiId": {
                "Ref": "MyApi"
            },
            "ResourceId": {
                "Fn::GetAtt": [
                    "MyApi",
                    "RootResourceId"
                ]
            },
            "HttpMethod": "GET",
            "AuthorizationType": "NONE",
            "Integration": {
                "Type": "MOCK"
            }
        }
    }
}
```

### Lambda 프록시

다음 예제에서는 클라이언트가 catch-all ANY 메서드에서 단일 통합 설정으로 Lambda 함수를 호출할 수 있도록 프록시 리소스를 생성합니다. 이 `Uri` 속성은 Lambda 함수를 지정합니다. Lambda 프록시 통합 및 샘플 Lambda 함수에 대한 자세한 내용은 API Gateway 개발자 안내서의 프록시 리소스를 통해 Lambda 프록시 통합을 사용하여 API 생성을 참조하십시오\*\*.

**메모**  
AWS::Lambda::P ermission 리소스를 사용하여 API Gateway에 Lambda 함수를 호출할 수 있는 권한을 부여합니다.

#### JSON (영문)

```
{
    "ProxyResource": {
        "Type": "AWS::ApiGateway::Resource",
        "Properties": {
            "RestApiId": {
                "Ref": "LambdaSimpleProxy"
            },
            "ParentId": {
                "Fn::GetAtt": [
                    "LambdaSimpleProxy",
                    "RootResourceId"
                ]
            },
            "PathPart": "{proxy+}"
        }
    },
    "ProxyResourceANY": {
        "Type": "AWS::ApiGateway::Method",
        "Properties": {
            "RestApiId": {
                "Ref": "LambdaSimpleProxy"
            },
            "ResourceId": {
                "Ref": "ProxyResource"
            },
            "HttpMethod": "ANY",
            "AuthorizationType": "NONE",
            "Integration": {
                "Type": "AWS_PROXY",
                "IntegrationHttpMethod": "POST",
                "Uri": {
                    "Fn::Sub": "arn:aws:apigateway:${AWS::Region}:lambda:path/2015-03-31/functions/${LambdaForSimpleProxy.Arn}/invocations"
                }
            }
        }
    }
}
```

### 연결된 요청 검사기

다음 예제에서는 REST API, 메서드 및 요청 검사기를 만들고 요청 검사기를 메서드와 연결합니다. 또한 요청 페이로드를 변환하는 방법을 지정할 수 있습니다.

#### JSON (영문)

```
{
  "Parameters": {
    "contentHandling": {
      "Type": "String"
    },
    "operationName": {
      "Type": "String",
      "Default": "testoperationName"
    },
    "restApiName": {
      "Type": "String",
      "Default": "testrestApiName"
    },
    "validatorName": {
      "Type": "String",
      "Default": "testvalidatorName"
    },
    "validateRequestBody": {
      "Type": "String",
      "Default": "testvalidateRequestBody"
    },
    "validateRequestParameters": {
      "Type": "String",
      "Default": true
    }
  },
  "Resources": {
    "RestApi": {
      "Type": "AWS::ApiGateway::RestApi",
      "Properties": {
        "Name": {
          "Ref": "restApiName"
        }
      }
    },
    "Method": {
      "Type": "AWS::ApiGateway::Method",
      "Properties": {
        "HttpMethod": "POST",
        "ResourceId": {
          "Fn::GetAtt": [
            "RestApi",
            "RootResourceId"
          ]
        },
        "RestApiId": {
          "Ref": "RestApi"
        },
        "AuthorizationType": "NONE",
        "Integration": {
          "Type": "MOCK",
          "ContentHandling": {
            "Ref": "contentHandling"
          },
          "IntegrationResponses": [
            {
              "ContentHandling": {
                "Ref": "contentHandling"
              },
              "StatusCode": 400
            }
          ]
        },
        "RequestValidatorId": {
          "Ref": "RequestValidator"
        },
        "OperationName": {
          "Ref": "operationName"
        }
      }
    },
    "RequestValidator": {
      "Type": "AWS::ApiGateway::RequestValidator",
      "Properties": {
        "Name": {
          "Ref": "validatorName"
        },
        "RestApiId": {
          "Ref": "RestApi"
        },
        "ValidateRequestBody": {
          "Ref": "validateRequestBody"
        },
        "ValidateRequestParameters": {
          "Ref": "validateRequestParameters"
        }
      }
    }
  },
  "Outputs": {
    "RootResourceId": {
      "Value": {
        "Fn::GetAtt": [
          "RestApi",
          "RootResourceId"
        ]
      }
    }
  }
}
```

## 참고 항목

- method:Amazon API Gateway REST API Reference*에 넣기 *
