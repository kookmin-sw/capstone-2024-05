# AWS::CloudWatch::AnomalyDetector 메트릭 데이터 쿼리

이 구조체는 `GetMetricData` 와 `PutMetricAlarm`. 이 구조체의 지원되는 사용은 이러한 두 작업에 대해 다릅니다.

에서 사용되는 경우 `GetMetricData`반환할 지표 데이터와 이 호출이 하나의 지표에 대한 데이터 배치 세트를 검색하는지 또는 지표 인사이트 쿼리 또는 수학 표현식을 수행하는지 여부를 나타냅니다. 단일 호출에는 `GetMetricData` 최대 500 개의 `MetricDataQuery` 구조체가 포함될 수 있습니다.

에서 사용하면 `PutMetricAlarm`지표 수학 표현식을 기반으로 경보를 생성할 수 있습니다. `MetricDataQuery` 배열의 각 항목은 검색할 지표 또는 검색된 지표에 대해 수행할 수학 표현식을 지정합니다. 단일 호출은 배열에 `PutMetricAlarm` 최대 20개의 구조를 포함할 수 있습니다 `MetricDataQuery` . 20개의 구조에는 `MetricStat` 메트릭을 검색하기 위한 매개 변수를 포함하는 최대 10개의 구조와 `Expression` 수학 식을 수행하기 위한 매개 변수를 포함하는 최대 10개의 구조가 포함될 수 있습니다. 이러한 구조체 중 `Expression` 하나는 에 대한 값으로 `true` 있어야 합니다`ReturnData`. 이 표현식의 결과는 알람이 감시하는 값입니다.

작업에 사용되는 모든 식은 `PutMetricAlarm` 단일 시계열을 반환해야 합니다. 자세한 내용은 _Amazon CloudWatch 사용 설명서의 지표 수학 구문 및 함수를 참조하십시오_.

이 구조체의 매개 변수 중 일부는 이 구조체를 작업에서 사용하든 작업에서 사용하든 용도 `GetMetricData` 가 `PutMetricAlarm` 다릅니다 . 이러한 차이점은 다음 매개 변수 목록에 설명되어 있습니다.

## 통사론

AWS CloudFormation 템플릿에서 이 엔터티를 선언하려면 다음 구문을 사용합니다.

### JSON (영문)

```
{
  "AccountId" : String,
  "Expression" : String,
  "Id" : String,
  "Label" : String,
  "MetricStat" : MetricStat,
  "Period" : Integer,
  "ReturnData" : Boolean
}
```

## 속성

`AccountId`  
지표가 있는 계정의 ID입니다.  
`GetMetricData` 모니터링 계정에서 작업을 수행하는 경우 이 지표를 검색할 계정을 지정하는 데 사용합니다.  
작업을 수행하는 경우 `PutMetricAlarm` 이를 사용하여 경보가 감시하는 지표가 포함된 계정을 지정합니다.  
*필수 항목 *여부: 아니요  
_유형_: 문자열  
_최소_: `1`  
_최대_: `255`  
_업데이트 필요 사항_: 바꿔 놓음

`Expression`  
이 필드에는 Metrics Insights 쿼리 또는 반환된 데이터에 대해 수행할 지표 수학 표현식이 포함될 수 있습니다. Metrics Insights 쿼리에 대한 자세한 내용은 Amazon CloudWatch 사용 설명서의 Metrics Insights 쿼리 구성 요소 및 구문을 참조하세요\**.  
수학 표현식은 `Id` 다른 지표 또는 쿼리를 사용하여 해당 지표를 참조할 수 있으며, `Id` 다른 표현식을 사용하여 해당 표현식의 결과를 사용할 수도 있습니다. 지표 수학 표현식에 대한 자세한 내용은 *Amazon CloudWatch 사용 설명서*의 지표 수학 구문 및 함수를 참조하십시오.  
각 MetricDataQuery 오브젝트 내에서 둘 중 하나 `Expression` 또는 `MetricStat` 둘 다를 지정해서는 안 됩니다.  
*필수 항목 *여부: 아니요  
*유형*: 문자열  
*최소*: `1`  
*최대*: `2048`  
*업데이트 필요 사항\*: 바꿔 놓음

`Id`  
이 개체를 응답의 결과에 연결하는 데 사용되는 짧은 이름입니다. 이 이름은 에 대한 단일 호출 내에서 고유해야 합니다 `GetMetricData`. 이 데이터 집합에 대해 수학 식을 수행하는 경우 이 이름은 해당 데이터를 나타내며 수학 식에서 변수로 사용할 수 있습니다. 유효한 문자는 문자, 숫자 및 밑줄입니다. 첫 번째 문자는 소문자여야 합니다.  
_필수 항목 여부_: 예  
_유형_: 문자열  
_최소_: `1`  
_최대_: `255`  
_업데이트 필요 사항_: 바꿔 놓음

`Label`  
이 지표 또는 표현식에 대한 사람이 읽을 수 있는 레이블입니다. 이는 값이 무엇을 나타내는지 알 수 있도록 표현식인 경우에 특히 유용합니다. 지표 또는 표현식이 CloudWatch 대시보드 위젯에 표시되면 레이블이 표시됩니다. Label을 생략하면 CloudWatch가 기본값을 생성합니다.  
동적 표현식을 레이블에 넣어 더 설명적으로 만들 수 있습니다. 자세한 내용은 동적 레이블 사용을 참조하십시오.  
*필수 항목 *여부: 아니요  
_유형_: 문자열  
_업데이트 필요 사항_: 중단 없음

`MetricStat`  
통계, 기간 및 단위와 함께 반환될 메트릭입니다. 이 객체가 지표를 검색하고 반환된 데이터에 대해 수학 표현식을 수행하지 않는 경우에만 이 파라미터를 사용합니다.  
하나의 MetricDataQuery 오브젝트 내에서 둘 중 하나 `Expression` 또는 `MetricStat` 둘 다를 지정해서는 안 됩니다.  
*필수 항목 *여부: 아니요  
_유형_: MetricStat  
_업데이트 필요 사항_: 바꿔 놓음

`Period`  
반환된 데이터 요소의 세분성(초)입니다. 일반 해상도를 사용하는 지표의 경우 기간은 1분(60초)만큼 짧을 수 있으며 60의 배수여야 합니다. 1분 미만의 간격으로 수집되는 고해상도 지표의 경우 기간은 1, 5, 10, 30, 60 또는 60의 배수일 수 있습니다. 고분해능 지표는 `PutMetricData` 를 포함하는 작업에 의해 저장된 지표입니다`StorageResolution of 1 second`.  
*필수 항목 *여부: 아니요  
_유형_: Integer  
_최소_: `1`  
_업데이트 필요 사항_: 바꿔 놓음

`ReturnData`  
에서 사용되는 경우 `GetMetricData`이 옵션은 이 지표의 타임스탬프 및 원시 데이터 값을 반환할지 여부를 나타냅니다. 수학 표현식을 수행하기 위해 이 호출을 수행하고 원시 데이터를 반환할 필요가 없는 경우 를 지정할 수 있습니다`false`. 이를 생략하면 기본값인 가 `true` 사용됩니다.  
에서 사용할 경우 `PutMetricAlarm` `true` 하나의 표현식 결과를 알람으로 사용하도록 지정합니다. 동일한 작업의 다른 모든 지표 및 표현식의 경우 `PutMetricAlarm` `ReturnData` False로 지정합니다.  
*필수 항목 *여부: 아니요  
_유형_: Boolean  
_업데이트 필요 사항_: 중단 없음
