# AWS::AutoScaling::AutoScalingGroup 인스턴스배포

이 구조를 사용하여 온디맨드 인스턴스 및 스팟 인스턴스의 배포와 혼합 인스턴스 정책에 대한 온디맨드 및 스팟 용량을 충족하는 데 사용되는 할당 전략을 지정합니다.

자세한 내용은 Amazon EC2 Auto Scaling 사용 설명서*의 여러 인스턴스 유형 및 구매 옵션이 있는 Auto Scaling 그룹을 참조하세요*.

`InstancesDistribution` 은 AWS::AutoScaling::AutoScalingGroup MixedInstancesPolicy 속성 유형의 속성입니다.

## 통사론

AWS CloudFormation 템플릿에서 이 엔터티를 선언하려면 다음 구문을 사용합니다.

### JSON (영문)

```
{
  "OnDemandAllocationStrategy" : String,
  "OnDemandBaseCapacity" : Integer,
  "OnDemandPercentageAboveBaseCapacity" : Integer,
  "SpotAllocationStrategy" : String,
  "SpotInstancePools" : Integer,
  "SpotMaxPrice" : String
}
```

## 속성

`OnDemandAllocationStrategy`  
온디맨드 인스턴스가 시작될 때 적용할 할당 전략입니다. 가능한 인스턴스 유형은 지정한 시작 템플릿 재정의에 따라 결정됩니다.  
다음은 유효한 값을 나열합니다.  
최저가  
price를 사용하여 우선 순위가 가장 높은 인스턴스 유형을 결정하고, 가용 영역 내에서 가장 낮은 가격의 인스턴스 유형을 먼저 시작합니다. 를 지정하는 Auto Scaling 그룹의 기본값입니다`InstanceRequirements`.  
우선 순위  
시작 템플릿 재정의에 대한 인스턴스 유형의 순서를 가장 높은 우선 순위에서 가장 낮은 우선 순위로(목록의 첫 번째에서 마지막으로) 설정합니다. Amazon EC2 Auto Scaling은 우선 순위가 가장 높은 인스턴스 유형을 먼저 시작합니다. 우선 순위가 가장 높은 인스턴스 유형을 사용하여 모든 온디맨드 용량을 충족할 수 없는 경우 Amazon EC2 Auto Scaling은 두 번째 우선 순위 인스턴스 유형을 사용하여 나머지 용량을 시작합니다. 이는 지정하지 않은 Auto Scaling 그룹의 기본값이며 지정하는 `InstanceRequirements` 그룹에는 사용할 수 없습니다.
*필수 항목 *여부: 아니요  
_유형_: 문자열  
_업데이트 필요 사항_: 중단 없음

`OnDemandBaseCapacity`  
온디맨드 인스턴스에서 충족해야 하는 오토 스케일링 용량의 최소 양입니다. 이 기본 부분은 그룹이 확장될 때 먼저 시작됩니다.  
이 숫자의 측정 단위는 그룹의 원하는 용량과 동일합니다. 시작 템플릿 재정의 목록에서 가중치 용량 값을 지정하거나 그룹의 기본 원하는 용량 유형 설정을 변경하여 기본 측정 단위(인스턴스 수)를 변경하는 경우 동일한 측정 단위를 사용하여 이 숫자를 지정해야 합니다.  
기본값 : 0  
이 설정에 대한 업데이트는 현재 온디맨드 인스턴스 수준을 조정하기 위해 인스턴스를 점진적으로 교체하는 것을 의미합니다. 인스턴스를 교체할 때 Amazon EC2 Auto Scaling은 이전 인스턴스를 종료하기 전에 새 인스턴스를 시작합니다.
*필수 항목 *여부: 아니요  
_유형_: Integer  
_업데이트 필요 사항_: 일부 중단

`OnDemandPercentageAboveBaseCapacity`  
를 초과하는 추가 용량에 대한 온디맨드 인스턴스 및 스팟 인스턴스의 백분율을 제어합니다`OnDemandBaseCapacity`. 숫자로 표현됩니다(예: 20은 온디맨드 인스턴스 20%, 스팟 인스턴스 80%를 지정함). 100으로 설정하면 온디맨드 인스턴스만 사용됩니다.  
기본값: 100  
이 설정에 대한 업데이트는 인스턴스를 점진적으로 교체하여 기본 용량보다 높은 추가 용량에 맞게 현재 온디맨드 및 스팟 인스턴스 수준을 조정하는 것을 의미합니다. 인스턴스를 교체할 때 Amazon EC2 Auto Scaling은 이전 인스턴스를 종료하기 전에 새 인스턴스를 시작합니다.
*필수 항목 *여부: 아니요  
_유형_: Integer  
_업데이트 필요 사항_: 일부 중단

`SpotAllocationStrategy`  
스팟 인스턴스가 시작될 때 적용할 할당 전략입니다. 가능한 인스턴스 유형은 지정한 시작 템플릿 재정의에 따라 결정됩니다.  
다음은 유효한 값을 나열합니다.  
용량 최적화  
사용 가능한 스팟 용량에 따라 최적으로 선택된 풀을 사용하여 스팟 인스턴스를 요청합니다. 이 전략은 중단 위험이 가장 낮습니다. 특정 인스턴스 유형이 먼저 시작될 확률을 높이려면 를 사용합니다`capacity-optimized-prioritized`.  
용량 최적화 우선 순위  
시작 템플릿 재정의에 대한 인스턴스 유형의 순서를 가장 높은 우선 순위에서 가장 낮은 우선 순위로(목록의 첫 번째에서 마지막으로) 설정합니다. Amazon EC2 Auto Scaling은 최선을 다해 인스턴스 유형 우선 순위를 준수하지만 용량을 먼저 최적화합니다. 온디맨드 할당 전략이 로 설정된 경우 `prioritized`온디맨드 용량을 이행할 때 동일한 우선 순위가 적용됩니다. 이 값은 를 지정하는 Auto Scaling 그룹에 유효한 값이 아닙니다`InstanceRequirements`.  
최저가  
속성에 대해 지정한 스팟 풀 수에서 가용 영역 내에서 가장 낮은 가격의 풀을 사용하여 스팟 인스턴스를 요청합니다 `SpotInstancePools` . 원하는 용량이 충족되도록 하기 위해 여러 풀에서 스팟 인스턴스를 받을 수 있습니다. 이 값은 기본값이지만, 이 전략은 가용 용량이 아닌 인스턴스 가격만 고려하기 때문에 중단률이 높아질 수 있습니다.  
price-capacity-optimized(권장)  
가격 및 용량 최적화 할당 전략은 가격과 용량을 모두 고려하여 중단될 가능성이 가장 낮고 가격이 가장 낮은 스팟 인스턴스 풀을 선택합니다.
*필수 항목 *여부: 아니요  
_유형_: 문자열  
_업데이트 필요 사항_: 중단 없음

`SpotInstancePools`  
스팟 인스턴스를 할당할 스팟 인스턴스 풀의 수입니다. 스팟 풀은 재정의의 다양한 인스턴스 유형에 따라 결정됩니다. `SpotAllocationStrategy` 가 인 `lowest-price` 경우에만 유효합니다. 값의 범위는 1-20이어야 합니다.  
기본값 : 2  
*필수 항목 *여부: 아니요  
_유형_: Integer  
_업데이트 필요 사항_: 중단 없음

`SpotMaxPrice`  
스팟 인스턴스에 대해 지불할 의사가 있는 단위 시간당 최고 가격입니다. 최고 가격이 선택한 인스턴스 유형의 스팟 가격보다 낮으면 스팟 인스턴스가 시작되지 않습니다. 최고 가격을 지정하면 중단이 증가할 수 있으므로 권장하지 않습니다. 스팟 인스턴스가 시작되면 현재 스팟 가격을 지불합니다. 이전에 설정한 최고 가격을 제거하려면 속성을 포함하되 값에 빈 문자열("")을 지정합니다.  
최고 가격을 지정하면 지정하지 않을 때보다 인스턴스가 더 자주 중단됩니다.
유효 범위: 최소값 0.001  
*필수 항목 *여부: 아니요  
_유형_: 문자열  
_업데이트 필요 사항_: 중단 없음
