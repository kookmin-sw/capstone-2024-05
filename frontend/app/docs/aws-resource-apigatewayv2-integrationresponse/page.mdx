# AWS::ApiGatewayV2::통합 응답

리소스 `AWS::ApiGatewayV2::IntegrationResponse` 는 WebSocket API에 대한 통합 응답을 업데이트합니다. 자세한 내용은 API Gateway 개발자 안내서의 API Gateway에서 WebSocket API 통합 응답 설정을 참조하십시오\*\*.

## 통사론

AWS CloudFormation 템플릿에서 이 엔터티를 선언하려면 다음 구문을 사용합니다.

### JSON (영문)

```
{
  "Type" : "AWS::ApiGatewayV2::IntegrationResponse",
  "Properties" : {
      "ApiId" : String,
      "ContentHandlingStrategy" : String,
      "IntegrationId" : String,
      "IntegrationResponseKey" : String,
      "ResponseParameters" : Json,
      "ResponseTemplates" : Json,
      "TemplateSelectionExpression" : String
    }
}
```

## 속성

`ApiId`  
API 식별자입니다.  
_필수 항목 여부_: 예  
_유형_: 문자열  
_업데이트 필요 사항_: 바꿔 놓음

`ContentHandlingStrategy`  
WebSocket API에 대해서만 지원됩니다. 응답 페이로드 콘텐츠 형식 변환을 처리하는 방법을 지정합니다. 지원되는 값은 `CONVERT_TO_BINARY` 및 `CONVERT_TO_TEXT`이며 다음과 같은 동작이 있습니다.  
 `CONVERT_TO_BINARY`: 응답 페이로드를 Base64로 인코딩된 문자열에서 해당 이진 Blob으로 변환합니다.  
 `CONVERT_TO_TEXT`: 응답 페이로드를 이진 Blob에서 Base64로 인코딩된 문자열로 변환합니다.  
이 속성이 정의되지 않은 경우 응답 페이로드는 수정 없이 통합 응답에서 경로 응답 또는 메서드 응답으로 전달됩니다.  
*필수 항목 *여부: 아니요  
_유형_: 문자열  
_업데이트 필요 사항_: 중단 없음

`IntegrationId`  
통합 ID입니다.  
_필수 항목 여부_: 예  
_유형_: 문자열  
_업데이트 필요 사항_: 바꿔 놓음

`IntegrationResponseKey`  
통합 응답 키입니다.  
_필수 항목 여부_: 예  
_유형_: 문자열  
_업데이트 필요 사항_: 중단 없음

`ResponseParameters`  
백엔드에서 메서드 응답으로 전달되는 응답 매개 변수를 지정하는 키-값 맵입니다. 키는 메서드 응답 헤더 파라미터 이름이고 매핑된 값은 통합 응답 헤더 값, 작은따옴표 쌍으로 묶인 정적 값 또는 통합 응답 본문의 JSON 표현식입니다. 매핑 키는 의 패턴과 일치해야 하며`method.response.header.{name} `, 여기서 name은 유효하고 고유한 헤더 이름입니다. 매핑된 비정적 값은 또는 의 패턴과 일치해야 하며 `integration.response.header.{name} ` `integration.response.body.{JSON-expression} `, 여기서 `{name}` 는 유효하고 고유한 응답 헤더 이름이며 접두 `{JSON-expression}` 어가 없는 유효한 JSON 식입니다 `$` .  
*필수 항목 *여부: 아니요  
_형식_: Json  
_업데이트 필요 사항_: 중단 없음

`ResponseTemplates`  
통합 응답에 대한 응답 템플릿의 모음으로, 키-값 쌍의 문자열 간 맵입니다. 응답 템플릿은 키/값 맵으로 표시되며, content-type은 키로, template은 값으로 표시됩니다.  
*필수 항목 *여부: 아니요  
_형식_: Json  
_업데이트 필요 사항_: 중단 없음

`TemplateSelectionExpression`  
통합 응답에 대한 템플릿 선택 표현식입니다. WebSocket API에 대해서만 지원됩니다.  
*필수 항목 *여부: 아니요  
_유형_: 문자열  
_업데이트 필요 사항_: 중단 없음

## 반환 값

### 참고문헌

이 리소스의 논리적 ID를 내장 함수에 전달하면 `Ref` `Ref`통합 응답 리소스 ID(예: )를 반환합니다 `abcd123`.

함수 사용에 대한 자세한 `Ref`내용은 Ref를 참조하세요.

### Fn::GetAtt

`Fn::GetAtt`내장 함수는 이 형식의 지정된 특성에 대한 값을 반환합니다. 다음은 사용 가능한 특성 및 샘플 반환 값입니다.

내장 함수 사용에 대한 자세한 `Fn::GetAtt`내용은 Fn::GetAtt 단원을 참조하십시오.

####

`IntegrationResponseId` 통합 응답 ID입니다.

## 예제

### 통합 응답 생성 예시

다음 예제에서는 `IntegrationResponse` 라는 리소스 `MyApi` 가 있는 `integration` API에 대한 리소스를 만듭니다`MyIntegration`.

#### JSON (영문)

```
{
    "IntegrationResponse": {
        "Type": "AWS::ApiGatewayV2::IntegrationResponse",
        "Properties": {
            "IntegrationId": {
                "Ref": "MyIntegration"
            },
            "IntegrationResponseKey": "/400/",
            "ApiId": {
                "Ref": "MyApi"
            }
        }
    }
}
```

## 참고 항목

- Amazon API Gateway 버전 2 API 참조*의 CreateIntegrationResponse *
