# AWS::ECS::서비스 배포 구성

이 `DeploymentConfiguration` 속성은 배포 중에 실행되는 작업 수와 작업 중지 및 시작 순서를 제어하는 선택적 배포 매개 변수를 지정합니다.

## 통사론

AWS CloudFormation 템플릿에서 이 엔터티를 선언하려면 다음 구문을 사용합니다.

### JSON (영문)

```
{
  "Alarms" : DeploymentAlarms,
  "DeploymentCircuitBreaker" : DeploymentCircuitBreaker,
  "MaximumPercent" : Integer,
  "MinimumHealthyPercent" : Integer
}
```

## 속성

`Alarms`  
CloudWatch 경보에 대한 정보입니다.  
*필수 항목 *여부: 아니요  
_유형_: DeploymentAlarms  
_업데이트 필요 사항_: 중단 없음

`DeploymentCircuitBreaker`  
배포 회로 차단기는 롤링 업데이트() 배포 유형을 사용하는 서비스에만 사용할 수 있습니다`ECS`.
**배포 회로 차단기는** 서비스가 안정적인 상태에 도달할 수 없는 경우 서비스 배포가 실패할지 여부를 결정합니다. 배포 회로 차단기를 사용하는 경우 서비스 배포가 실패 상태로 전환되고 새 작업 시작이 중지됩니다. 롤백 옵션을 사용하는 경우 서비스 배포가 실패하면 서비스가 성공적으로 완료된 마지막 배포로 롤백됩니다. 자세한 내용은 _Amazon Elastic Container Service 개발자 안내서_  
의 롤링 업데이트를 참조하세요*필수 항목 여부*: 아니요  
_형식_: DeploymentCircuitBreaker  
_업데이트 필요 사항_: 중단 없음

`MaximumPercent`  
서비스가 롤링 업데이트(`ECS`) 배포 유형을 `maximumPercent` 사용하는 경우 매개 변수는 배포 중에 `RUNNING` 또는 `PENDING` 상태에서 허용되는 서비스 작업 수의 상한 `desiredCount` 을 백분율 (가장 가까운 정수로 내림)로 나타냅니다. 이 매개 변수를 사용하면 배포 일괄 처리 크기를 정의할 수 있습니다. 예를 들어 서비스에서 서비스 스케줄러를 사용 중 `REPLICA` 이고 4개의 `desiredCount` 태스크 중 `maximumPercent` a와 200%의 값이 있는 경우 스케줄러는 4개의 이전 태스크를 중지하기 전에 4개의 새 태스크를 시작할 수 있습니다(이 작업을 수행하는 데 필요한 클러스터 리소스를 사용할 수 있는 경우). 서비스 스케줄러 `maximumPercent` 를 사용하는 서비스의 `REPLICA` 기본값은 200%입니다.  
서비스가 블루/그린(`CODE_DEPLOY`) 또는 `EXTERNAL` 배포 유형 및 EC2 시작 유형을 사용하는 작업을 사용하는 경우 **최대 백분율** 값은 기본값으로 설정되며, `RUNNING` 컨테이너 인스턴스`DRAINING`가 상태. 서비스의 태스크가 Fargate 시작 유형을 사용하는 경우 최대 백분율 값은 사용되지 않지만 서비스를 설명할 때 반환됩니다.  
*필수 항목 *여부: 아니요  
_유형_: Integer  
_업데이트 필요 사항_: 중단 없음

`MinimumHealthyPercent`  
서비스가 롤링 업데이트(`ECS`) 배포 유형을 `minimumHealthyPercent` 사용하는 경우 배포 중에 상태를 `RUNNING` 유지해야 하는 서비스 작업 수의 하한 `desiredCount` 을 백분율(가장 가까운 정수로 반올림)로 나타냅니다. 이 파라미터를 사용하면 추가 클러스터 용량을 사용하지 않고 배포할 수 있습니다. 예를 들어 서비스에 `desiredCount` 4개의 태스크가 있고 50%의 태스크 `minimumHealthyPercent` 가 있는 경우 서비스 스케줄러는 두 개의 새 태스크를 시작하기 전에 클러스터 용량을 확보하기 위해 두 개의 기존 태스크를 중지할 수 있습니다.  
\*\* 부하 분산 장치를 사용하지 않는 서비스의 경우 다음 사항에 유의해야 합니다.

- 서비스의 작업 내에 있는 모든 필수 컨테이너가 상태 확인을 통과하면 서비스가 정상으로 간주됩니다.
- 태스크에 상태 확인이 정의된 필수 컨테이너가 없는 경우 서비스 스케줄러는 태스크가 상태에 도달한 후 40초 동안 기다렸 다가 `RUNNING` 태스크가 최소 정상 백분율 합계로 계산됩니다.
- 작업에 상태 확인이 정의된 필수 컨테이너가 하나 이상 있는 경우 서비스 스케줄러는 작업이 정상 상태에 도달할 때까지 기다렸다가 최소 정상 백분율 합계로 계산합니다. 작업은 작업 내의 모든 필수 컨테이너가 상태 확인을 통과한 경우 정상으로 간주됩니다. 서비스 스케줄러가 대기할 수 있는 시간은 컨테이너 상태 확인 설정에 따라 결정됩니다.
  \*\* 부하 분산 장치를 사용하는 서비스의 경우 다음 사항에 유의해야 합니다.
- 태스크에 상태 확인이 정의된 필수 컨테이너가 없는 경우 서비스 스케줄러는 로드 밸런서 대상 그룹 상태 확인이 정상 상태를 반환할 때까지 기다렸다가 태스크를 최소 정상 백분율 합계로 계산합니다.
- 작업에 상태 확인이 정의된 필수 컨테이너가 있는 경우 서비스 스케줄러는 작업이 정상 상태에 도달하고 로드 밸런서 대상 그룹 상태 확인이 정상 상태를 반환할 때까지 기다렸다가 작업을 최소 정상 백분율 합계로 계산합니다.
  서비스가 블루/그린(`CODE_DEPLOY`) 또는 `EXTERNAL` 배포 유형을 사용하고 EC2 시작 유형을 사용하는 태스크를 실행하는 경우, **최소 정상 상태 백분율** 값은 기본값으로 설정되며, 컨테이너 인스턴스가 상태에 있는 동안 상태를 `RUNNING` 유지하는 서비스의 태스크 수에 대한 하한을 정의하는 데 사용됩니다 `DRAINING` . 서비스가 블루/그린(`CODE_DEPLOY`) 또는 `EXTERNAL` 배포 유형을 사용하고 Fargate 시작 유형을 사용하는 태스크를 실행 중인 경우, 최소 정상 상태 백분율 값은 서비스를 설명할 때 반환되더라도 사용되지 않습니다.  
  *필수 항목 *여부: 아니요  
  _유형_: Integer  
  _업데이트 필요 사항_: 중단 없음
