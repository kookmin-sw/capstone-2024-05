# 권장사항

**항목**

- 템플릿 정의
- 스택 세트 생성 또는 스택 추가
- 스택 세트의 스택 업데이트

AWS CloudFormation 모범 사례를 검토합니다.

## 템플릿 정의

- 여러 지역 내의 여러 계정에서 표준화하려는 템플릿을 정의합니다.
- 템플릿을 생성할 때 글로벌 리소스(예: IAM 역할 및 Amazon S3 버킷)가 동일한 계정의 둘 이상의 리전에서 생성될 때 이름 충돌이 발생하지 않도록 해야 합니다.
- 스택 세트에는 단일 템플릿과 파라미터 세트가 있습니다. 스택 세트와 연결된 모든 계정에 동일한 스택이 생성됩니다. 템플릿을 작성할 때 제어와 표준화의 균형을 잘 맞출 수 있도록 충분히 세분화하십시오.
- 템플릿을 Amazon S3 버킷에 저장하는 것이 좋습니다.

## 스택 세트 생성 또는 스택 추가

- 스택 세트에 더 많은 수의 스택 인스턴스를 추가하기 전에 초기 스택 세트에 스택 인스턴스를 추가할 수 있는지 확인합니다.
- 사용 사례에 적합한 배포(롤아웃) 옵션을 선택합니다.
  - 보다 보수적인 배포의 경우 **Maximum Concurrent Accounts(최대 동시 계정**)를 1로, **Failure Tolerance(장애 허용**)를 0으로 설정합니다. 영향이 가장 낮은 지역이 지역 순서 목록의 첫 번째 지역이 되도록 설정합니다 \*\*\*\* . 하나의 리전으로 시작합니다.
  - 더 빠른 배포를 위해 ** 필요에 따라 **Maximum Concurrent Accounts(최대 동시 계정**) 및 **Failure Tolerance(내결함성) 값을 늘립니다.
- 스택 세트에 대한 작업은 관련된 스택 인스턴스 수에 따라 달라지며 상당한 시간이 걸릴 수 있습니다.

## 스택 세트의 스택 업데이트

- 기본적으로 스택 세트를 업데이트하면 모든 스택 인스턴스가 업데이트됩니다. 두 리전에 각각 20개의 계정이 있는 경우 40개의 스택 인스턴스가 있으며 스택 세트를 업데이트하면 모두 업데이트됩니다.

  스택 인스턴스 수가 많은 스택 세트의 경우, 업데이트된 버전의 템플릿을 테스트하려면 모든 스택 인스턴스를 업데이트하기 전에 몇 개의 테스트 계정에서 스택 인스턴스를 선택적으로 업데이트하는 것이 좋습니다.

- 스택 세트 내의 개별 스택 업데이트를 보다 세부적으로 제어하려면 여러 스택 세트를 생성하도록 계획하십시오.
- 많은 수의 스택이 포함된 스택 세트를 업데이트하는 데 상당한 시간이 걸릴 수 있습니다. 이 릴리스에서는 스택 세트에서 한 번에 하나의 작업만 허용됩니다. 스택 세트에서 다른 작업을 수행하지 못하도록 차단되지 않도록 업데이트를 계획합니다.
