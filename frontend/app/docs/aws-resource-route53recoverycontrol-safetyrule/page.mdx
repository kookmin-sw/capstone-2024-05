# AWS::Route53RecoveryControl::안전 규칙

Amazon Route 53 Application Recovery Controller의 제어판에서 안전 규칙을 생성합니다. Amazon Route 53 Application Recovery Controller의 안전 규칙을 사용하면 라우팅 제어 상태 변경, 라우팅 제어 활성화 및 비활성화에 대한 보호 장치를 추가하여 원치 않는 결과를 방지할 수 있습니다. 안전 규칙의 이름은 제어판 내에서 고유해야 합니다.

Route 53 ARC에는 어설션 규칙과 게이팅 규칙이라는 두 가지 유형의 안전 규칙이 있습니다.

어설션 규칙: 어설션 규칙은 라우팅 제어 상태를 변경할 때 특정 기준이 충족되도록 강제합니다. 예를 들어, 트래픽이 `On` 애플리케이션에 대해 하나 이상의 셀로 계속 전달되도록 트랜잭션이 완료된 후 하나 이상의 라우팅 제어 상태가 기준이 될 수 있습니다. 이렇게 하면 페일 오픈 시나리오가 방지됩니다.

게이팅 규칙: 게이팅 규칙을 사용하면 게이팅 라우팅 컨트롤을 라우팅 컨트롤 그룹에 대한 전체 온-오프 스위치로 구성할 수 있습니다. 또는 더 복잡한 제어 시나리오를 구성할 수 있습니다(예: 여러 제어 라우팅 제어 구성).

자세한 내용은 Amazon Route 53 Application Recovery Controller 개발자 안내서의 안전 규칙을 참조하세요.

## 통사론

AWS CloudFormation 템플릿에서 이 엔터티를 선언하려면 다음 구문을 사용합니다.

### JSON (영문)

```
{
  "Type" : "AWS::Route53RecoveryControl::SafetyRule",
  "Properties" : {
      "AssertionRule" : AssertionRule,
      "ControlPanelArn" : String,
      "GatingRule" : GatingRule,
      "Name" : String,
      "RuleConfig" : RuleConfig,
      "Tags" : [Tag, ... ]
    }
}
```

## 속성

`AssertionRule`  
어설션 규칙은 라우팅 제어 상태를 변경할 때 규칙 구성에서 설정한 기준이 충족되도록 합니다. 그렇지 않으면 라우팅 제어에 대한 변경이 허용되지 않습니다. 예를 들어, 트래픽이 `On` 애플리케이션에 대해 하나 이상의 셀로 계속 흐르도록 하나 이상의 라우팅 제어 상태가 트랜잭션 이후에 있는 것이 기준일 수 있습니다. 이렇게 하면 fail-open 시나리오를 방지할 수 있습니다.  
*필수 항목 *여부: 아니요  
_형식_: AssertionRule  
_업데이트 필요 사항_: 중단 없음

`ControlPanelArn`  
제어판의 Amazon 리소스 이름(ARN)입니다.  
_필수 항목 여부_: 예  
_유형_: 문자열  
_업데이트 필요 사항_: 바꿔 놓음

`GatingRule`  
게이팅 규칙은 게이팅 라우팅 컨트롤 또는 게이팅 라우팅 컨트롤 집합이 지정한 규칙 구성에 따라 true로 평가되는지 확인하여 라우팅 제어 상태 변경 집합을 완료할 수 있도록 합니다.  
예를 들어, 하나의 게이팅 라우팅 제어를 지정하고 `Type` 규칙 구성에서 `OR` 를 로 설정하면 규칙이 true로 평가되려면 게이팅 라우팅 제어를 로 설정해야 `On` 합니다 . 즉, 게이팅 제어 스위치를 On으로 설정합니다. 이렇게 하면 게이팅 규칙에서 지정한 대상 라우팅 제어에 대한 라우팅 제어 상태를 업데이트할 수 있습니다.  
*필수 항목 *여부: 아니요  
_형식_: GatingRule  
_업데이트 필요 사항_: 중단 없음

`Name`  
어설션 규칙의 이름입니다. 이름은 제어판 내에서 고유해야 합니다. 다음을 제외하고 이름에 공백이 아닌 문자를 사용할 수 있습니다: & > < ' (작은따옴표) " (큰따옴표) ; (세미콜론)  
_필수 항목 여부_: 예  
_유형_: 문자열  
_업데이트 필요 사항_: 중단 없음

`RuleConfig`  
특정 어설션 제어(라우팅 제어)에 대해 설정하는 기준으로, 트랜잭션의 결과로 얼마나 많은 제어 상태가 되어야 하는지를 지정합니다 `ON` . 예를 들어, 세 개의 어설션 제어가 있는 경우 `ATLEAST 2` 규칙 구성에 대해 지정할 수 있습니다. 즉, 두 개 이상의 어설션 제어 가 `ON`이어야 하며, 따라서 두 개 이상의 AWS 리전에서 트래픽이 해당 컨트롤로 이동해야 합니다.  
_필수 항목 여부_: 예  
_유형_: RuleConfig  
_업데이트 필요 사항_: 바꿔 놓음

`Tags`  
태그의 값입니다.  
*필수 항목 *여부: 아니요  
_유형_: 태그 목록  
_업데이트 필요 사항_: 바꿔 놓음

## 반환 값

### 참고문헌

이 리소스의 논리적 ID를 내장 함수에 전달하면 `Ref`개체 `Ref`가 반환됩니다 `SafetyRuleArn` .

함수 사용에 대한 자세한 `Ref`내용은 Ref를 참조하세요.

### Fn::GetAtt

`Fn::GetAtt`내장 함수는 이 형식의 지정된 특성에 대한 값을 반환합니다. 다음은 사용 가능한 특성 및 샘플 반환 값입니다.

내장 함수 사용에 대한 자세한 `Fn::GetAtt`내용은 Fn::GetAtt 단원을 참조하십시오.

####

`SafetyRuleArn` 안전 규칙의 Amazon 리소스 이름(ARN)입니다.

`Status` 안전 규칙의 배포 상태입니다. 상태는 PENDING, DEPLOYED PENDING_DELETION 중 하나일 수 있습니다.
